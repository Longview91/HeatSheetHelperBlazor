@page "/allevents"
@using HeatSheetHelperBlazor.Components.Shared
@using HeatSheetHelperBlazor.Services
@inject MeetDataService MeetDataService

<h3>All Events</h3>

@if (MeetDataService.SwimMeet?.SwimEvents != null)
{
    foreach (var swimEvent in MeetDataService.SwimMeet.SwimEvents)
    {
        foreach (var heat in swimEvent.Heats)
        {
            <table class="table all-events-table">
                <thead>
                    <tr>
                        <th colspan="5" class="event-header">
                            Event @swimEvent.EventNumber: @swimEvent.EventDetails
                            | Heat @(heat.HeatNumber == 100 ? "Sign-in Event" : heat.HeatNumber.ToString())
                            | at @heat.StartTime
                        </th>
                    </tr>
                    <tr>
                        <th>Lane</th>
                        <th><div>Swimmer</div><div>Team</div></th>
                        <th>Age</th>
                        <th>Seed Time</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var lane in heat.LaneInfos)
                    {
                        <tr>
                            <td>@(lane.LaneNumber == 0 ? "" : lane.LaneNumber.ToString())</td>
                            <td><div><strong>@lane.SwimmerName</strong></div><div>@lane.TeamName @lane.RelayTeamLetter</div></td>
                            <td>@(lane.SwimmerAge == 0 ? "" : lane.SwimmerAge.ToString())</td>
                            <td>@lane.SeedTime</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    }
}
else
{
    <p>No events loaded.</p>
}